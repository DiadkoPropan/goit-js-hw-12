{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport axios from \"axios\";\n\nexport async function getImagesByQuery(query, page = 1, options = {}) {\n  const perPage = options.perPage || 15;\n\n  try {\n    const response = await axios.get(\"https://pixabay.com/api/\", {\n      params: {\n        key: \"49722241-b38f1bcf58efdc2f53696c0dc\",\n        q: query,\n        page,\n        per_page: perPage,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        ...options.extraParams, // додаткові параметри, якщо треба\n      },\n    });\n\n    const data = response.data;\n\n    if (data.hits.length === 0) {\n      iziToast.show({\n        title: \"No results\",\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n        position: \"topRight\",\n        backgroundColor: \"#ef4040\",\n        messageColor: \"#fff\",\n        timeout: 5000,\n        progressBar: false,\n        close: true,\n        transitionIn: \"fadeInDown\",\n        transitionOut: \"fadeOutUp\",\n      });\n    }\n\n    return {\n      images: data.hits,\n      totalHits: data.totalHits,\n    };\n\n  } catch (error) {\n    iziToast.show({\n      title: \"Error\",\n      message: \"Something went wrong. Please try again later.\",\n      position: \"topRight\",\n      backgroundColor: \"#ef4040\",\n      messageColor: \"#fff\",\n      timeout: 5000,\n      progressBar: false,\n      close: true,\n      transitionIn: \"fadeInDown\",\n      transitionOut: \"fadeOutUp\",\n    });\n\n    console.error(\"API Error:\", error);\n    throw error;\n  }\n}","import { getImagesByQuery } from './pixabay-api';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector(\".gallery\");\n\nfunction createGallery(images) {\n  const markup = images.map(image => `\n  <li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n      <img\n        class=\"gallery-image\"\n        src=\"${image.webformatURL}\"\n        alt=\"${image.tags}\"\n      />\n    </a>\n    <div class=\"info\">\n        <p><b>Likes</b> ${image.likes}</p>\n        <p><b>Views</b> ${image.views}</p>\n        <p><b>Comments</b> ${image.comments}</p>\n        <p><b>Downloads</b> ${image.downloads}</p>\n      </div>\n  </li>`).join(\"\");\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n    scrollZoom: true\n  });\n\n  lightbox.refresh();\n}\n\nfunction clearGallery() {\n  const gallery = document.querySelector(\".gallery\");\n  gallery.innerHTML = '';  \n}\n\nfunction showLoader() {\n  const loader = document.querySelector(\".loader\"); \n  loader.classList.add(\"is-visible\");  \n}\nfunction hideLoader() {\n  const loader = document.querySelector(\".loader\"); \n  loader.classList.remove(\"is-visible\"); \n}\n\nfunction showLoadMoreButton() {\n  const MoreBtn = document.querySelector(\".MoreBtn\"); \n  MoreBtn.classList.add(\"is-visible\");  \n}\n\nfunction hideLoadMoreButton(){\n  const MoreBtn = document.querySelector(\".MoreBtn\"); \n  MoreBtn.classList.remove(\"is-visible\"); \n}\n\nexport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n};","import { getImagesByQuery } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions';\n\nconst form = document.querySelector('.form');\nconst MoreBtn = document.querySelector('.MoreBtn');\n\nlet query = '';\nlet page = 1;\nlet perPage = 15;\n\n// Обробка події надсилання форми\nform.addEventListener('submit', async event => {\n  event.preventDefault(); // Забороняємо перезавантаження сторінки\n\n  query = event.target.elements['search-text'].value.trim(); // Отримуємо текст пошуку\n  if (query === '') return; // Якщо поле порожнє — нічого не робимо\n\n  page = 1; // Скидаємо сторінку на початок (новий пошук)\n\n  await fetchImages(query, page); // Робимо запит\n});\n\n// Обробка кнопки \"Завантажити ще\"\nMoreBtn.addEventListener(\"click\", async () => {\n  page += 1; // Збільшуємо номер сторінки\n  await fetchImages(query, page); // Завантажуємо наступну порцію зображень\n});\n\n// Основна функція запиту\nasync function fetchImages(query, page) {\n  showLoader(); // Показуємо індикатор завантаження\n\n  if (page === 1) {\n    clearGallery(); // Якщо це перша сторінка — очищаємо попередні результати\n  }\n\n  try {\n    const { images, totalHits } = await getImagesByQuery(query, page, {perPage }); // Очікуємо на результат\n\n    // Якщо нічого не знайдено (тільки при першому запиті)\n    if (images.length === 0 && page === 1) {\n      hideLoadMoreButton(); // Ховаємо кнопку \"Load more\"\n      iziToast.show({ // Показуємо повідомлення\n        title: 'No results',\n        message: \"Sorry, no images match your search query.\",\n        position: \"topRight\",\n        backgroundColor: \"#ef4040\",\n        messageColor: \"#fff\",\n        timeout: 5000,\n        progressBar: false,\n        close: true,\n        transitionIn: 'fadeInDown',\n        transitionOut: 'fadeOutUp',\n      });\n      return; // Припиняємо виконання\n    }\n\n    createGallery(images); // Малюємо зображення\n\n    // Якщо це не перша сторінка — прокручуємо вниз\n    if (page > 1) {\n      const firstImage = document.querySelector('.gallery').firstElementChild;\n      if (firstImage) {\n        const cardHeight = firstImage.getBoundingClientRect().height;\n        window.scrollBy({\n          top: cardHeight * 2,\n          left: 0,\n          behavior: \"smooth\",\n        });\n      }\n    }\n\n    // Якщо зображень менше за очікуване або ми вже завантажили все\n    if (images.length < perPage || page * perPage >= totalHits) {\n      hideLoadMoreButton(); // Ховаємо кнопку\n      iziToast.show({ // Показуємо повідомлення про завершення\n        title: 'End of results',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: \"topRight\",\n        backgroundColor: \"#ef4040\",\n        messageColor: \"#fff\",\n        timeout: 5000,\n        progressBar: false,\n        close: true,\n        transitionIn: 'fadeInDown',\n        transitionOut: 'fadeOutUp',\n      });\n    } else {\n      showLoadMoreButton(); // Інакше — показуємо кнопку \"Load more\"\n    }\n\n  } catch (error) {\n    console.log('Fetch failed:', error); // Лог в консоль (для розробника)\n\n    iziToast.show({ // Повідомлення для користувача\n      title: 'Error',\n      message: \"Something went wrong while fetching images.\",\n      position: \"topRight\",\n      backgroundColor: \"#ef4040\",\n      messageColor: \"#fff\",\n      timeout: 5000,\n      progressBar: false,\n      close: true,\n      transitionIn: 'fadeInDown',\n      transitionOut: 'fadeOutUp',\n    });\n\n    hideLoadMoreButton(); // Ховаємо кнопку\n  } finally {\n    hideLoader(); // Ховаємо лоадер у будь-якому випадку\n  }\n}"],"names":["getImagesByQuery","query","page","options","perPage","data","axios","iziToast","error","gallery","createGallery","images","markup","image","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","MoreBtn","event","fetchImages","totalHits","firstImage","cardHeight"],"mappings":"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"}